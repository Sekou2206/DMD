<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails Location | DMD AUTO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #0b0b0b; --text-color: #d1d1d1; --accent-color: #e6e6e6; --bg-card: #141414; --border-color: #2a2a2a; --font-title: 'Playfair Display', serif; --font-body: 'Lato', sans-serif; --font-tech: 'Lato', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg-color); color: var(--text-color); font-family: var(--font-body); font-weight: 300; overflow-x: hidden; }
        a { text-decoration: none; color: inherit; transition: 0.3s; } img { max-width: 100%; display: block; }
        
        /* HEADER */
        header { position: fixed; top: 0; width: 100%; padding: 25px 50px; display: flex; justify-content: space-between; align-items: center; background: rgba(10,10,10,0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color); z-index: 1000; transition: 0.4s; }
        header.scrolled { padding: 15px 50px; }
        .nav-group { flex: 1; display: flex; gap: 40px; } .nav-group.left { justify-content: flex-start; } .nav-group.right { justify-content: flex-end; }
        .logo-container { flex: 0 0 auto; margin: 0 40px; text-align: center; }
        .logo { font-family: var(--font-title); font-size: 1.8rem; font-weight: 400; letter-spacing: 4px; color: var(--accent-color); text-transform: uppercase; position: relative; display: inline-block; cursor: pointer; }
        .logo::after { content: 'AUTO'; display: block; font-size: 0.6rem; letter-spacing: 8px; margin-top: 5px; font-family: var(--font-body); font-weight: 300; color: #888; }
        .nav-link { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 2px; position: relative; color: #888; }
        .nav-link:hover, .nav-link.active { color: var(--accent-color); }
        .nav-link::after { content: ''; position: absolute; bottom: -5px; left: 50%; width: 0; height: 1px; background: var(--accent-color); transition: 0.3s; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; left: 0; }
        .menu-toggle { display: none; cursor: pointer; font-size: 1.5rem; color: #fff; }

        /* MAIN LAYOUT */
        main { padding-top: 100px; min-height: 100vh; padding-bottom: 80px; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; flex-wrap: wrap; gap: 60px; }
        .left-col { flex: 1.2; min-width: 300px; }
        .right-col { flex: 0.8; min-width: 300px; display: flex; flex-direction: column; gap: 30px; }

        h1.car-title { font-family: var(--font-title); font-size: 3.5rem; margin-bottom: 10px; line-height: 1; }
        .car-specs { color: #888; margin-bottom: 30px; font-size: 1.1rem; letter-spacing: 1px; font-family: var(--font-tech); text-transform: uppercase; }
        
        /* Description */
        #car-desc { margin-bottom: 30px; color: #aaa; font-size: 1.05rem; line-height: 1.8; text-align: justify; border-left: 3px solid var(--border-color); padding-left: 20px; }

        /* CAROUSEL - RENFORCÉ */
        .carousel-container { position: relative; width: 100%; margin-bottom: 50px; border: 1px solid var(--border-color); overflow: hidden; background: #000; }
        .carousel-track { 
            display: flex; 
            width: 100%; 
            height: 100%;
            transition: transform 0.5s ease-in-out; 
        }
        .carousel-slide { 
            width: 100%;          /* Force la largeur */
            flex: 0 0 100%;       /* Empêche le rétrécissement - CLÉ DU CORRECTION */
            height: 500px; 
            background: #111;     /* Fond de secours */
        }
        .carousel-slide img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            display: block; 
        }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.6); color: #fff; border: 1px solid rgba(255,255,255,0.2); padding: 15px; cursor: pointer; z-index: 2; font-size: 2rem; transition: 0.3s; }
        .carousel-btn:hover { background: rgba(255,255,255,0.9); color: #000; }
        .prev-btn { left: 0; }
        .next-btn { right: 0; }

        /* FICHE TECHNIQUE */
        .technical-sheet { background: #111; border: 1px solid var(--border-color); padding: 30px; margin-bottom: 40px; }
        .section-title-tech { font-family: var(--font-tech); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; color: #666; margin-bottom: 25px; display: block; border-bottom: 1px solid #222; padding-bottom: 10px; }
        .tech-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; margin-bottom: 30px; }
        .tech-item { display: flex; flex-direction: column; }
        .tech-label { font-size: 0.75rem; color: #666; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .tech-value { font-size: 1.1rem; color: #fff; font-weight: 700; font-family: var(--font-tech); }
        .tech-equip-list { list-style: none; border-top: 1px solid #222; padding-top: 20px; }
        .tech-equip-list li { position: relative; padding-left: 20px; margin-bottom: 8px; color: #ccc; font-size: 0.9rem; }
        .tech-equip-list li::before { content: '•'; position: absolute; left: 0; color: #555; }

        /* Availability */
        .availability-section { background: #111; padding: 30px; border: 1px solid var(--border-color); }
        .section-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 2px; color: #666; margin-bottom: 20px; display: block; font-family: var(--font-tech); font-weight: 700; }
        .calendar-list { list-style: none; }
        .cal-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid var(--border-color); }
        .cal-date { color: #ccc; font-family: var(--font-tech); font-size: 0.9rem; }
        .cal-status { padding: 5px 15px; border-radius: 4px; font-size: 0.8rem; font-weight: 700; font-family: var(--font-tech); text-transform: uppercase; letter-spacing: 1px; }
        .status-free { background-color: #fff; color: #000; }
        .status-busy { background-color: #444; color: #fff; }

        .price-section { background: #111; padding: 30px; border: 1px solid var(--border-color); }
        .price-tag { font-size: 2rem; font-weight: 400; color: #fff; margin-bottom: 20px; display: block; font-family: var(--font-title); }
        table.price-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .price-table td { padding: 15px 0; border-bottom: 1px solid var(--border-color); font-size: 1rem; color: #ccc; }
        .price-table td:last-child { text-align: right; font-weight: 700; color: #fff; font-size: 1.1rem; }
        .btn-action { width: 100%; padding: 18px; background: #000; border: 1px solid var(--border-color); color: #fff; font-family: var(--font-tech); text-transform: uppercase; letter-spacing: 1.5px; font-size: 0.75rem; cursor: pointer; transition: all 0.3s ease; font-weight: 700; }
        .btn-action:hover { border-color: #fff; background: #0a0a0a; }
        .conditions-box { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; background: #0f0f0f; border-left: 2px solid #fff; }
        .conditions-box.open { max-height: 500px; padding: 30px; margin-top: 20px; overflow-y: auto; }
        .cond-list li { margin-bottom: 12px; color: #ccc; line-height: 1.6; list-style: disc; margin-left: 20px; font-size: 0.95rem; }
        .cond-title { font-family: var(--font-title); font-size: 1.3rem; margin-bottom: 20px; color: #fff; border-bottom: 1px solid #333; padding-bottom: 10px; }

        footer { background: #000; padding: 80px 5%; border-top: 1px solid #222; }
        .footer-grid { display: grid; grid-template-columns: 1fr 1fr 1.5fr; gap: 60px; max-width: 1400px; margin: 0 auto; }
        .footer-col h4 { font-family: var(--font-tech); font-size: 0.9rem; margin-bottom: 25px; color: #fff; letter-spacing: 2px; text-transform: uppercase; font-weight: 700; }
        .footer-col p { color: #888; line-height: 1.8; font-size: 0.9rem; margin-bottom: 20px; }
        .socials a { margin-right: 20px; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: #fff; }
        .footer-links li { margin-bottom: 12px; }
        .footer-links a { color: #888; transition: 0.3s; font-size: 0.9rem; }
        .footer-links a:hover { color: #fff; padding-left: 5px; }
        .map-container { width: 100%; height: 200px; background: #1a1a1a; margin-bottom: 20px; overflow: hidden; border: 1px solid #333; }
        .map-container iframe { width: 100%; height: 100%; border: 0; filter: grayscale(100%) invert(92%) contrast(80%) brightness(0.8); }
        .btn-footer { width: 100%; padding: 15px; background: #fff; color: #000; border: none; text-transform: uppercase; letter-spacing: 2px; font-weight: 600; cursor: pointer; transition: 0.3s; }
        .btn-footer:hover { background: #ccc; }
        .copyright { margin-top: 80px; text-align: center; font-size: 0.7rem; color: #444; border-top: 1px solid #111; padding-top: 20px; }

        @media (max-width: 992px) { header { flex-direction: column; padding: 15px; height: auto; } .nav-group { display: none; width: 100%; flex-direction: column; text-align: center; padding: 20px 0; background: #050505; } .nav-group.active { display: flex; } .logo-container { margin: 15px 0; } .menu-toggle { display: block; position: absolute; right: 20px; top: 25px; } .container { flex-direction: column; } h1.car-title { font-size: 2.5rem; } .footer-grid { grid-template-columns: 1fr; } .tech-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <header id="main-header">
        <div class="menu-toggle" onclick="toggleMenu()">☰</div>
        <ul class="nav-group left"><li><a href="index.html" class="nav-link">Accueil</a></li><li><a href="services.html" class="nav-link active">Location</a></li><li><a href="vente.html" class="nav-link">Vente</a></li></ul>
        <div class="logo-container"><a href="index.html" class="logo">DMD</a></div>
        <ul class="nav-group right"><li><a href="depot.html" class="nav-link">Dépôt Vente</a></li><li><a href="recherche.html" class="nav-link">Recherche</a></li><li><a href="contact.html" class="nav-link">Contact</a></li></ul>
    </header>

    <main>
        <div class="container">
            <div class="left-col">
                <h1 class="car-title" id="car-title">Chargement...</h1>
                <p class="car-specs" id="car-specs">...</p>
                <div id="car-desc">...</div>

                <div class="carousel-container">
                    <div class="carousel-track" id="track">
                        <!-- Images générées par JS -->
                    </div>
                    <button class="carousel-btn prev-btn" onclick="moveCarousel(-1)">&#10094;</button>
                    <button class="carousel-btn next-btn" onclick="moveCarousel(1)">&#10095;</button>
                </div>

                <div class="technical-sheet">
                    <span class="section-title-tech">Fiche Technique & Équipements</span>
                    <div id="tech-content"></div>
                </div>
            </div>

            <div class="right-col">
                <div class="availability-section">
                    <span class="section-label">Disponibilité (Calendrier)</span>
                    <ul class="calendar-list" id="calendar-list"></ul>
                </div>

                <div class="price-section">
                    <span class="section-label">Tarifs de Location</span>
                    <table class="price-table">
                        <tr><td>24 Heures</td><td id="price-24h">...</td></tr>
                        <tr><td>48 Heures</td><td id="price-48h">...</td></tr>
                        <tr><td>Week-End</td><td id="price-we">...</td></tr>
                    </table>
                    <button class="btn-action" style="width:100%" onclick="toggleCond('loc')">Voir Conditions Location</button>
                    <div id="cond-loc" class="conditions-box">
                        <h3 class="cond-title">Documents Requis</h3>
                        <ul class="cond-list">
                            <li>Permis de conduire B valide depuis plus de 3 ans</li>
                            <li>Carte bancaire pour la caution (2000€)</li>
                            <li>Justificatif de domicile de moins de 3 mois</li>
                            <li>Âge minimum : 25 ans</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-grid"><div class="footer-col"><div class="logo" style="margin-bottom: 20px;">DMD</div><p>L'excellence automobile.</p><div class="socials"><a href="#">Instagram</a> <a href="#">Snapchat</a></div></div><div class="footer-col"><h4>Navigation</h4><ul class="footer-links"><li><a href="index.html">Accueil</a></li><li><a href="services.html">Location</a></li><li><a href="vente.html">Vente</a></li><li><a href="depot.html">Dépôt Vente</a></li></ul></div><div class="footer-col"><h4>Nous Trouver</h4><div class="map-container"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2624.215013230877!2d2.292292615509614!3d48.85837007928757!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e66e2964e34e2d%3A0x8ddca9ee380ef7e0!2sTour%20Eiffel!5e0!3m2!1sfr!2sfr!4v1614160000000!5m2!1sfr!2sfr" allowfullscreen="" loading="lazy"></iframe></div><a href="recherche.html"><button class="btn-footer">Formulaire de Recherche</button></a></div></div><p class="copyright">&copy; 2023 DMD AUTO.</p>
    </footer>

    <script>
        const carData = [
            { id: 0, title: "Mercedes AMG GT", specs: "2021 • 12 000 km • 585 Ch", desc: "La Mercedes-AMG GT incarne le luxe sportif ultime.", price24: "800 €", price48: "1 500 €", priceWe: "2 000 €", images: ["https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?q=80&w=1200&auto=format&fit=crop", "https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?q=80&w=1200&auto=format&fit=crop"], availability: [{ date: "20 Oct", status: "Libre" }, { date: "21 Oct", status: "Occupé" }], techContent: `<div class="tech-grid"><div class="tech-item"><span class="tech-label">Moteur</span><span class="tech-value">V8 4.0L</span></div></div>` },
            
            { id: 1, title: "Porsche 911 Carrera", specs: "2022 • 5 000 km", desc: "La légendaire 911.", price24: "950 €", price48: "1 800 €", priceWe: "2 500 €", images: ["https://images.unsplash.com/photo-1503376763036-066120622c74?q=80&w=1200&auto=format&fit=crop"], availability: [{ date: "20 Oct", status: "Libre" }], techContent: `<div class="tech-grid"><div class="tech-item"><span class="tech-label">Moteur</span><span class="tech-value">Flat-6</span></div></div>` },

            // BMW M4 (ID 2) - Avec vos 5 images locales
            {
                id: 2,
                title: "BMW M4 Comp.",
                specs: "2020 • 25 000 km",
                desc: "Le mélange de performance et de confort au quotidien. Parfaite pour les longs trajets.",
                price24: "450 €",
                price48: "850 €",
                priceWe: "1 200 €",
                images: [
                    "golf1.jpg",
                    "golf2.jpg",
                    "golf3.jpg",
                    "golf4.jpg",
                    "golf5.jpg"
                ],
                availability: [
                    { date: "20 Oct", status: "Libre" },
                    { date: "21 Oct", status: "Occupé" },
                    { date: "22 Oct", status: "Libre" },
                    { date: "23 Oct", status: "Libre" }
                ],
                techContent: `
                    <div class="tech-grid">
                        <div class="tech-item"><span class="tech-label">Moteur</span><span class="tech-value">6 Cylindres Turbo</span></div>
                        <div class="tech-item"><span class="tech-label">Puissance</span><span class="tech-value">510 ch</span></div>
                        <div class="tech-item"><span class="tech-label">0-100 km/h</span><span class="tech-value">3.9 s</span></div>
                        <div class="tech-item"><span class="tech-label">Places</span><span class="tech-value">4</span></div>
                    </div>
                    <ul class="tech-equip-list">
                        <li>Head-Up Display</li>
                        <li>Harman Kardon Sound</li>
                        <li>Keyless Go</li>
                    </ul>
                `
            },

            { id: 3, title: "Audi RS7", specs: "2023 • 2 000 km", desc: "Le summum de la technologie.", price24: "600 €", price48: "1 100 €", priceWe: "1 500 €", images: ["https://images.unsplash.com/photo-1603584173870-7b23194d3d15?q=80&w=1200&auto=format&fit=crop"], availability: [{ date: "20 Oct", status: "Libre" }], techContent: `<div class="tech-grid"><div class="tech-item"><span class="tech-label">Moteur</span><span class="tech-value">V8 4.0L</span></div></div>` }
        ];

        const urlParams = new URLSearchParams(window.location.search);
        const carId = urlParams.get('car');
        
        // --- CHANGEMENT ICI ---
        // Si aucune voiture n'est demandée (?car=...), on charge par défaut l'ID 2 (BMW avec vos images)
        const currentCar = carData[carId] || carData[2]; 
        // ---------------------

        document.addEventListener('DOMContentLoaded', () => {
            document.title = `${currentCar.title} | Location | DMD AUTO`;
            document.getElementById('car-title').innerText = currentCar.title;
            document.getElementById('car-specs').innerText = currentCar.specs;
            document.getElementById('car-desc').innerText = currentCar.desc;
            document.getElementById('tech-content').innerHTML = currentCar.techContent;
            
            // Tarifs
            document.getElementById('price-24h').innerText = currentCar.price24;
            document.getElementById('price-48h').innerText = currentCar.price48;
            document.getElementById('price-we').innerText = currentCar.priceWe;

            // CAROUSEL GENERATION
            const track = document.getElementById('track');
            track.innerHTML = currentCar.images.map(src => 
                `<div class="carousel-slide"><img src="${src}" alt="Photo: ${src}" onerror="this.style.display='none'"></div>`
            ).join('');
            
            let currentIndex = 0;

            // CALENDRIER
            const calendarList = document.getElementById('calendar-list');
            calendarList.innerHTML = currentCar.availability.map(item => `
                <li class="cal-item">
                    <span class="cal-date">${item.date}</span>
                    <span class="cal-status ${item.status === 'Libre' ? 'status-free' : 'status-busy'}">${item.status}</span>
                </li>
            `).join('');

            // Reset carousel
            currentIndex = 0;
            updateCarousel();
        });

        function moveCarousel(direction) {
            const slides = document.querySelectorAll('.carousel-slide');
            if (slides.length === 0) return;
            
            currentIndex += direction;
            if (currentIndex < 0) currentIndex = slides.length - 1;
            if (currentIndex >= slides.length) currentIndex = 0;
            updateCarousel();
        }

        function updateCarousel() {
            const track = document.getElementById('track');
            track.style.transform = `translateX(-${currentIndex * 100}%)`;
        }

        function toggleCond(type) { 
            const box = document.getElementById('cond-' + type); 
            box.classList.toggle('open'); 
        }

        function toggleMenu() { 
            document.querySelectorAll('.nav-group').forEach(g => g.classList.toggle('active')); 
        }

        window.addEventListener('scroll', () => {
            const header = document.getElementById('main-header');
            header.classList.toggle('scrolled', window.scrollY > 50);
        });
    </script>
</body>
</html>